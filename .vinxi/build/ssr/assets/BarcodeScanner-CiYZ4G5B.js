import{ssr as l,ssrHydrationKey as a,escape as n,createComponent as u,ssrAttribute as p}from"solid-js/web";import{createSignal as f,onMount as m,onCleanup as b,Show as v}from"solid-js";import{Html5Qrcode as h,Html5QrcodeSupportedFormats as e}from"html5-qrcode";var x=["<div",' class="absolute inset-0 flex items-center justify-center text-white text-center p-4 z-10">',"</div>"],g=["<div",' class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"><div class="bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl relative"><div class="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50"><h3 class="font-bold text-slate-800">Scan Barcode</h3><button class="p-2 hover:bg-slate-200 rounded-full text-slate-500 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><div class="p-6 relative bg-black"><!--$-->',"<!--/--><div",' class="rounded-lg overflow-hidden w-full h-full min-h-[300px]"></div><div class="absolute bottom-4 left-0 right-0 text-center pointer-events-none"><p class="text-white/80 text-sm bg-black/50 inline-block px-3 py-1 rounded-full backdrop-blur-md">Align barcode within the box</p></div></div></div></div>'];function k(c){let s="reader",t=null;const[i,d]=f("");return m(()=>{t=new h(s,{formatsToSupport:[e.EAN_13,e.EAN_8,e.CODE_128,e.CODE_39,e.UPC_A,e.UPC_E,e.CODABAR],verbose:!1,experimentalFeatures:{useBarCodeDetectorIfSupported:!0}});const o={fps:30,qrbox:{width:300,height:150},aspectRatio:1,videoConstraints:{facingMode:"environment",focusMode:"continuous"}};t.start({facingMode:"environment"},o,r=>{c.onScanSuccess(r)},r=>{}).catch(r=>{console.error("Error starting scanner:",r),d("Could not start camera. Please ensure permissions are granted.")})}),b(async()=>{if(t&&t.isScanning)try{await t.stop(),t.clear()}catch(o){console.error("Failed to stop scanner:",o)}}),l(g,a(),n(u(v,{get when(){return i()},get children(){return l(x,a(),n(i()))}})),p("id",n(s,!0),!1))}export{k as default};
