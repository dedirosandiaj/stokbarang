import{c as a}from"./server-fns-runtime-DJML9_-T.js";import{db as c}from"./index-BinUX9hy.js";import{u as e}from"./schema-DxiP6MVG.js";import{eq as u,desc as n}from"drizzle-orm";import i from"bcryptjs";const d=a(async function(){return await c.select().from(e).orderBy(n(e.createdAt))},"src_lib_users_ts--getUsers_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),b=d,l=a(async function(r){return(await c.select().from(e).where(u(e.id,r)))[0]},"src_lib_users_ts--getUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),h=l,p=a(async function(r){try{const s=await i.hash(r.password,10);return await c.insert(e).values({...r,password:s}),{success:!0}}catch(s){return console.error("Create user error:",s),{success:!1,error:"Failed to create user"}}},"src_lib_users_ts--createUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),v=p,U=a(async function(r,s){try{const t={...s};return t.password&&(t.password=await i.hash(t.password,10)),await c.update(e).set(t).where(u(e.id,r)),{success:!0}}catch(t){return console.error("Update user error:",t),{success:!1,error:"Failed to update user"}}},"src_lib_users_ts--updateUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),y=U;a(async function(r){try{return await c.delete(e).where(u(e.id,r)),{success:!0}}catch(s){return console.error("Delete user error:",s),{success:!1,error:"Failed to delete user"}}},"src_lib_users_ts--deleteUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server=");export{b as a,v as c,h as g,y as u};
