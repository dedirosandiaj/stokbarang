import{c as o}from"./server-fns-runtime-HUGH5Jm0.js";import{db as c}from"./index-BinUX9hy.js";import{u as r}from"./schema-DxiP6MVG.js";import{eq as i,desc as d}from"drizzle-orm";import u from"bcryptjs";import"solid-js/web";import"solid-js/web/storage";import"./fetchEvent-CIpVWTXg.js";import"h3";import"unctx";import"node:async_hooks";import"drizzle-orm/postgres-js";import"postgres";import"drizzle-orm/pg-core";const C=o(async function(){return await c.select().from(r).orderBy(d(r.createdAt))},"src_lib_users_ts--getUsers_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),P=o(async function(e){return(await c.select().from(r).where(i(r.id,e)))[0]},"src_lib_users_ts--getUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),R=o(async function(e){try{const s=await u.hash(e.password,10);return await c.insert(r).values({...e,password:s}),{success:!0}}catch(s){return console.error("Create user error:",s),{success:!1,error:"Failed to create user"}}},"src_lib_users_ts--createUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),E=o(async function(e,s){try{const t={...s};return t.password&&(t.password=await u.hash(t.password,10)),await c.update(r).set(t).where(i(r.id,e)),{success:!0}}catch(t){return console.error("Update user error:",t),{success:!1,error:"Failed to update user"}}},"src_lib_users_ts--updateUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server="),J=o(async function(e){try{return await c.delete(r).where(i(r.id,e)),{success:!0}}catch(s){return console.error("Delete user error:",s),{success:!1,error:"Failed to delete user"}}},"src_lib_users_ts--deleteUser_1","/Users/dedirosandi/Documents/PROJECT/program-ela/src/lib/users.ts?tsr-directive-use-server=");export{R as createUser_1,J as deleteUser_1,P as getUser_1,C as getUsers_1,E as updateUser_1};
