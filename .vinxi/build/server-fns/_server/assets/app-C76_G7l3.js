import{createComponent as h,isServer as U,getRequestEvent as x,delegateEvents as I,ssr as q,ssrHydrationKey as j,escape as A}from"solid-js/web";import{M as D,T as K}from"./index-Dps0aSs2.js";import{F as N}from"./server-fns-Dijjw6ZU.js";import{children as $,createMemo as S,getOwner as M,untrack as W,Show as F,on as _,createRoot as H,createSignal as V,onCleanup as T,sharedConfig as L,ErrorBoundary as J,Suspense as z}from"solid-js";import{L as G}from"./Loading-b-bAnbUN.js";import{f as Q,g as X,R as Y,h as Z,i as tt,j as P,k as et,s as C,m as rt,l as nt,o as ot,p as at,q as it}from"./routing-CMRlbYJP.js";import{b as st}from"./action-CnXm9LBs.js";import"cookie-es";import"seroval";import"seroval-plugins/web";import"solid-js/web/storage";import"./fetchEvent-CIpVWTXg.js";import"h3";import"unctx";import"node:async_hooks";import"radix3";const B=t=>r=>{const{base:o}=r,n=$(()=>r.children),e=S(()=>Q(n(),r.base||""));let s;const c=X(t,e,()=>s,{base:o,singleFlight:r.singleFlight,transformUrl:r.transformUrl});return t.create&&t.create(c),h(Y.Provider,{value:c,get children(){return h(ct,{routerState:c,get root(){return r.root},get preload(){return r.rootPreload||r.rootLoad},get children(){return[(s=M())&&null,h(ut,{routerState:c,get branches(){return e()}})]}})}})};function ct(t){const r=t.routerState.location,o=t.routerState.params,n=S(()=>t.preload&&W(()=>{C(!0),t.preload({params:o,location:r,intent:Z()||"initial"}),C(!1)}));return h(F,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:e=>h(e,{params:o,location:r,get data(){return n()},get children(){return t.children}})})}function ut(t){if(U){const e=x();if(e&&e.router&&e.router.dataOnly){lt(e,t.routerState,t.branches);return}e&&((e.router||(e.router={})).matches||(e.router.matches=t.routerState.matches().map(({route:s,path:c,params:f})=>({path:s.originalPath,pattern:s.pattern,match:c,params:f,info:s.info}))))}const r=[];let o;const n=S(_(t.routerState.matches,(e,s,c)=>{let f=s&&e.length===s.length;const m=[];for(let l=0,w=e.length;l<w;l++){const p=s&&s[l],g=e[l];c&&p&&g.route.key===p.route.key?m[l]=c[l]:(f=!1,r[l]&&r[l](),H(R=>{r[l]=R,m[l]=tt(t.routerState,m[l-1]||t.routerState.base,O(()=>n()[l+1]),()=>{const b=t.routerState.matches();return b[l]??b[0]})}))}return r.splice(e.length).forEach(l=>l()),c&&f?c:(o=m[0],m)}));return O(()=>n()&&o)()}const O=t=>()=>h(F,{get when(){return t()},keyed:!0,children:r=>h(et.Provider,{value:r,get children(){return r.outlet()}})});function lt(t,r,o){const n=new URL(t.request.url),e=P(o,new URL(t.router.previousUrl||t.request.url).pathname),s=P(o,n.pathname);for(let c=0;c<s.length;c++){(!e[c]||s[c].route!==e[c].route)&&(t.router.dataOnly=!0);const{route:f,params:m}=s[c];f.preload&&f.preload({params:m,location:r.location,intent:"preload"})}}function dt([t,r],o,n){return[t,n?e=>r(n(e)):r]}function ht(t){let r=!1;const o=e=>typeof e=="string"?{value:e}:e,n=dt(V(o(t.get()),{equals:(e,s)=>e.value===s.value&&e.state===s.state}),void 0,e=>(!r&&t.set(e),L.registry&&!L.done&&(L.done=!0),e));return t.init&&T(t.init((e=t.get())=>{r=!0,n[1](o(e)),r=!1})),B({signal:n,create:t.create,utils:t.utils})}function mt(t,r,o){return t.addEventListener(r,o),()=>t.removeEventListener(r,o)}function ft(t,r){const o=t&&document.getElementById(t);o?o.scrollIntoView():r&&window.scrollTo(0,0)}function gt(t){const r=new URL(t);return r.pathname+r.search}function wt(t){let r;const o={value:t.url||(r=x())&&gt(r.request.url)||""};return B({signal:[()=>o,n=>Object.assign(o,n)]})(t)}function pt(t=!0,r=!1,o="/_server",n){return e=>{const s=e.base.path(),c=e.navigatorFactory(e.base);let f,m;function l(a){return a.namespaceURI==="http://www.w3.org/2000/svg"}function w(a){if(a.defaultPrevented||a.button!==0||a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)return;const i=a.composedPath().find(k=>k instanceof Node&&k.nodeName.toUpperCase()==="A");if(!i||r&&!i.hasAttribute("link"))return;const d=l(i),u=d?i.href.baseVal:i.href;if((d?i.target.baseVal:i.target)||!u&&!i.hasAttribute("state"))return;const v=(i.getAttribute("rel")||"").split(/\s+/);if(i.hasAttribute("download")||v&&v.includes("external"))return;const y=d?new URL(u,document.baseURI):new URL(u);if(!(y.origin!==window.location.origin||s&&y.pathname&&!y.pathname.toLowerCase().startsWith(s.toLowerCase())))return[i,y]}function p(a){const i=w(a);if(!i)return;const[d,u]=i,E=e.parsePath(u.pathname+u.search+u.hash),v=d.getAttribute("state");a.preventDefault(),c(E,{resolve:!1,replace:d.hasAttribute("replace"),scroll:!d.hasAttribute("noscroll"),state:v?JSON.parse(v):void 0})}function g(a){const i=w(a);if(!i)return;const[d,u]=i;n&&(u.pathname=n(u.pathname)),e.preloadRoute(u,d.getAttribute("preload")!=="false")}function R(a){clearTimeout(f);const i=w(a);if(!i)return m=null;const[d,u]=i;m!==d&&(n&&(u.pathname=n(u.pathname)),f=setTimeout(()=>{e.preloadRoute(u,d.getAttribute("preload")!=="false"),m=d},20))}function b(a){if(a.defaultPrevented)return;let i=a.submitter&&a.submitter.hasAttribute("formaction")?a.submitter.getAttribute("formaction"):a.target.getAttribute("action");if(!i)return;if(!i.startsWith("https://action/")){const u=new URL(i,rt);if(i=e.parsePath(u.pathname+u.search),!i.startsWith(o))return}if(a.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const d=st.get(i);if(d){a.preventDefault();const u=new FormData(a.target,a.submitter);d.call({r:e,f:a.target},a.target.enctype==="multipart/form-data"?u:new URLSearchParams(u))}}I(["click","submit"]),document.addEventListener("click",p),t&&(document.addEventListener("mousemove",R,{passive:!0}),document.addEventListener("focusin",g,{passive:!0}),document.addEventListener("touchstart",g,{passive:!0})),document.addEventListener("submit",b),T(()=>{document.removeEventListener("click",p),t&&(document.removeEventListener("mousemove",R),document.removeEventListener("focusin",g),document.removeEventListener("touchstart",g)),document.removeEventListener("submit",b)})}}function bt(t){if(U)return wt(t);const r=()=>{const n=window.location.pathname.replace(/^\/+/,"/")+window.location.search,e=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:n+window.location.hash,state:e}},o=at();return ht({get:r,set({value:n,replace:e,scroll:s,state:c}){e?window.history.replaceState(nt(c),"",n):window.history.pushState(c,"",n),ft(decodeURIComponent(window.location.hash.slice(1)),s),ot()},init:n=>mt(window,"popstate",it(n,e=>{if(e)return!o.confirm(e);{const s=r();return!o.confirm(s.value,{state:s.state})}})),create:pt(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:n=>window.history.go(n),beforeLeave:o}})(t)}var vt=["<div",' class="p-4 bg-red-50 text-red-900 min-h-screen"><h1 class="text-2xl font-bold mb-2">Application Error</h1><pre class="whitespace-pre-wrap overflow-auto p-4 bg-red-100 rounded text-sm"><!--$-->',"<!--/--><!--$-->","<!--/--></pre></div>"];function qt(){return h(bt,{root:t=>h(D,{get children(){return[h(K,{children:"SolidStart - Basic"}),h(J,{fallback:r=>q(vt,j(),A(r.toString()),r.stack&&`

${A(r.stack)}`),get children(){return h(z,{get fallback(){return h(G,{})},get children(){return t.children}})}})]}}),get children(){return h(N,{})}})}export{qt as default};
