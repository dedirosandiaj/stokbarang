import{e as x,i as n,q as o,l as s,b as d,m as A,t as c,S as C}from"./web-B77D8VL7.js";import{T as N}from"./index-D0gPe-Qg.js";import{g as F,u as P}from"./users-C72Eb6nw.js";import{U as T}from"./UserForm-ri37YpI2.js";import{j,u as q}from"./routing-D8yMn4L8.js";import{c as D}from"./createAsync-DwDWr0TH.js";import"./server-runtime-C6utdK21.js";import"./Button-lI7l4pQ1.js";var I=c('<div class="max-w-5xl mx-auto"><!$><!/><div class=mb-8><h1 class="text-3xl font-bold text-slate-900 tracking-tight">Edit User</h1><p class="text-slate-500 mt-2">Update user account details.</p></div><div class="bg-white rounded-2xl border border-slate-200 shadow-sm p-8"><!$><!/><!$><!/>'),L=c('<div class="mb-6 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm">'),M=c('<div class="py-8 text-center text-slate-500">Loading user data...');function R(){const m=j(),$=q(),f=D(()=>F(m.id)),[_,u]=x(!1),[p,a]=x(""),h=async e=>{u(!0),a("");try{const t={username:e.username,role:e.role};e.password&&(t.password=e.password);const r=await P(m.id,t);r.success?$("/dashboard/users"):a(r.error||"Failed to update user")}catch{a("An unexpected error occurred")}finally{u(!1)}};return(()=>{var e=n(I),t=e.firstChild,[r,S]=o(t.nextSibling),v=r.nextSibling,i=v.nextSibling,w=i.firstChild,[g,U]=o(w.nextSibling),y=g.nextSibling,[E,k]=o(y.nextSibling);return s(e,d(N,{children:"Edit User | ElaApp"}),r,S),s(i,(()=>{var l=A(()=>!!p());return()=>l()&&(()=>{var b=n(L);return s(b,p),b})()})(),g,U),s(i,d(C,{get when(){return f()},get fallback(){return n(M)},children:l=>d(T,{initialData:l,onSubmit:h,get isSubmitting(){return _()}})}),E,k),e})()}export{R as default};
